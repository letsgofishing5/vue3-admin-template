import{d as k,Q as c,C,r as _,a as l,o as K,c as R,w as a,b as n,R as w,l as I}from"./vendor-9004f6b8.js";import{u as N,a as S,n as T}from"./index-e2108b85.js";async function B(u){if(u.value)return await u.value.validate(t=>t)}const $=k({__name:"LoginForm",setup(u){const t=c({username:"admin",password:"123456"}),v=C();function y(r,e,o){e===""?o(new Error("请输入密码")):o()}function g(r,e,o){e===""?o(new Error("请输入账号")):o()}const V=c({username:[{validator:g,trigger:["blur"]}],password:[{validator:y,trigger:["blur"]}]}),p=_(),f=_(!1);async function i(){if(!await B(p))return;const{code:e,data:o}=await S(t,f);e===200&&(x(o),T.Succ(`登录成功，${o.username} 欢迎回来`),setTimeout(()=>{v.push("/")},500))}const d=N();function x(r){d.setToken(r.token),d.setUserName(r.username)}return(r,e)=>{const o=l("el-input"),m=l("el-form-item"),U=l("el-button"),b=l("el-form");return K(),R(b,{ref_key:"formRef",ref:p,model:t,rules:V},{default:a(()=>[n(m,{prop:"username"},{default:a(()=>[n(o,{placeholer:"请输入账号",autocomplete:"off",prefixIcon:"user",onKeyup:w(i,["enter"]),modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=s=>t.username=s)},null,8,["onKeyup","modelValue"])]),_:1}),n(m,{prop:"password"},{default:a(()=>[n(o,{placeholer:"请输入密码",autocomplete:"off",type:"password",prefixIcon:"lock",showPassword:"",onKeyup:w(i,["enter"]),modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=s=>t.password=s),clearable:""},null,8,["onKeyup","modelValue"])]),_:1}),n(m,null,{default:a(()=>[n(U,{class:"w-full",loading:f.value,type:"primary",onClick:e[2]||(e[2]=s=>i())},{default:a(()=>[I(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});export{$ as _};
