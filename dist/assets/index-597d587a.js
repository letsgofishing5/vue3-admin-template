import{e as M,d as g,a as c,o as s,c as _,w as a,b as l,x,t as S,j as v,F as C,k as R,y as T,A as V,B,u as m,C as E,D as H,G as L,T as K,l as I,H as N,K as U,I as q,J as z}from"./.pnpm-de04094d.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{u as D,n as F,t as J,l as W}from"./index-7c0c9df7.js";const j=M("menu",{state:()=>({isCollapse:!1,defaultActive:""}),getters:{},actions:{collapse(){this.isCollapse=!this.isCollapse},setDefaultActive(n){this.defaultActive=n}}}),O=g({__name:"MenuSubItem",props:{dynamicRoutes:{default:()=>({})}},setup(n){return(t,o)=>{const u=c("location"),r=c("el-icon"),p=c("Menu"),w=c("el-menu-item"),h=c("MenuSubItem",!0),y=c("el-sub-menu");return s(),_(y,{index:t.dynamicRoutes.path},{title:a(()=>{var e;return[l(r,null,{default:a(()=>[l(u)]),_:1}),x("span",null,S((e=t.dynamicRoutes.meta)==null?void 0:e.title),1)]}),default:a(()=>[(s(!0),v(C,null,R(t.dynamicRoutes.children,(e,d)=>{var i,f;return s(),v(C,{key:d},[(i=e.children)!=null&&i.length?T("",!0):(s(),_(w,{key:0,index:e.path},{default:a(()=>{var b;return[l(r,null,{default:a(()=>[l(p)]),_:1}),x("span",null,S((b=e.meta)==null?void 0:b.title),1)]}),_:2},1032,["index"])),(f=e.children)!=null&&f.length?(s(),_(h,{key:1,"dynamic-routes":e},null,8,["dynamic-routes"])):T("",!0)],64)}),128))]),_:1},8,["index"])}}}),Q=g({__name:"index",props:{dynamicRoutes:{default:()=>[]}},setup(n){const t=V(),o=j();return B(()=>t.fullPath,u=>{o.setDefaultActive(u)},{immediate:!0}),(u,r)=>{const p=c("Menu"),w=c("el-icon"),h=c("el-menu-item"),y=c("el-menu");return s(),_(y,{router:"","default-active":m(o).defaultActive,class:"h-screen","unique-opened":"",collapse:m(o).isCollapse},{default:a(()=>[(s(!0),v(C,null,R(u.dynamicRoutes,(e,d)=>{var i,f;return s(),v(C,{key:d},[(i=e.children)!=null&&i.length?T("",!0):(s(),_(h,{key:0,index:e.path},{default:a(()=>{var b;return[l(w,null,{default:a(()=>[l(p)]),_:1}),x("span",null,S((b=e.meta)==null?void 0:b.title),1)]}),_:2},1032,["index"])),(f=e.children)!=null&&f.length?(s(),_(O,{key:1,"dynamic-routes":e},null,8,["dynamic-routes"])):T("",!0)],64)}),128))]),_:1},8,["default-active","collapse"])}}});const X=P(Q,[["__scopeId","data-v-75cb6afc"]]),Y=M("tabs",{state:()=>({tabs:[]}),actions:{setTabs(n,t=!1){var u,r;n={...n};const o=this.tabs.findIndex(p=>p.fullPath===n.fullPath);((u=n==null?void 0:n.meta)!=null&&u.isTab||(r=this.tabs[o].meta)!=null&&r.isTab)&&(o==-1&&n.meta.title&&!t?this.tabs.push(n):t&&o!==-1&&this.tabs.splice(o,1))}}}),Z=x("div",{class:"flex-grow"},null,-1),ee=g({__name:"TabsComponent",setup(n){const t=Y(),o=j(),u=E(),r=D(),p=V();B(()=>p,e=>{t.setTabs(e)},{deep:!0,immediate:!0});const w=H(()=>{let e=r.dynamicRoutes[0];for(;e!=null&&e.children&&e.children.length;)e=e.children[0];return e.path});function h(e,d){u.push(e.paneName)}function y(e){const d=t.tabs.length;if(w.value===e&&d===1){F.Warn("唯一标签页已是首页，无法关闭");return}let i=t.tabs.findIndex(f=>f.fullPath===e);if(e!==o.defaultActive){t.setTabs({fullPath:e},!0);return}d==1?u.push("/"):i===0&&d>1?u.push(t.tabs[++i]):i&&u.push(t.tabs[--i]),t.setTabs({fullPath:e,meta:{isTab:!0}},!0)}return(e,d)=>{const i=c("el-tab-pane"),f=c("el-tabs"),b=c("el-menu");return s(),_(b,{"default-active":m(o).defaultActive,class:"flex items-center",mode:"horizontal",ellipsis:!1},{default:a(()=>[l(f,{closable:"",modelValue:m(o).defaultActive,"onUpdate:modelValue":d[0]||(d[0]=k=>m(o).defaultActive=k),type:"card",onTabClick:h,onTabRemove:y},{default:a(()=>[(s(!0),v(C,null,R(m(t).tabs,(k,A)=>(s(),_(i,{key:k.path+A,label:k.meta.title,name:k.path},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),Z]),_:1},8,["default-active"])}}}),te=M("breadcrumb",{state:()=>({breadcrumbs:[]}),actions:{setBreadcrumbs(n){this.breadcrumbs.splice(0,this.breadcrumbs.length),n.forEach(t=>{t.meta.title&&this.breadcrumbs.push(t)})}}}),ne={class:"flex items-center justify-between flex-1 max-h-12"},se={class:"flex items-center"},oe={class:"grid items-center grid-cols-2 gap-x-2"},ae={class:"text-sm font-bold"},le=g({__name:"NavComponent",setup(n){const t=j(),o=te(),u=E(),r=D(),p=V();B(()=>p,h=>{o.setBreadcrumbs(h.matched)},{deep:!0,immediate:!0});function w(){async function h(){const{code:y}=await W();y===200&&(r.clearAll(),u.push("/login"))}F.Confirm({message:"是否确认退出登录状态？",confirmCallback:h,type:"error"})}return(h,y)=>{const e=c("el-icon"),d=c("el-breadcrumb-item"),i=c("el-breadcrumb"),f=c("el-avatar"),b=c("el-dropdown-item"),k=c("el-dropdown-menu"),A=c("el-dropdown");return s(),v("nav",ne,[x("div",se,[l(e,{class:"m-4 cursor-pointer",onClick:m(t).collapse},{default:a(()=>[(s(),_(L(m(t).isCollapse?"expand":"fold")))]),_:1},8,["onClick"]),l(i,{"separator-icon":"ArrowRight"},{default:a(()=>[l(K,{name:"breadcrumb"},{default:a(()=>[(s(!0),v(C,null,R(m(o).breadcrumbs,($,G)=>(s(),_(d,{key:$.path+G},{default:a(()=>[I(S($.meta.title||$.name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),x("div",oe,[x("div",ae,S(m(r).username),1),l(A,{trigger:"click"},{dropdown:a(()=>[l(k,null,{default:a(()=>[l(b,{onClick:m(J)},{default:a(()=>[I("修改密码")]),_:1},8,["onClick"]),l(b,{onClick:w},{default:a(()=>[I("退出登录")]),_:1})]),_:1})]),default:a(()=>[l(f,{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"})]),_:1})])])}}}),ce={class:"flex flex-col h-20 overflow-hidden border"},ue=g({__name:"index",setup(n){return(t,o)=>(s(),v("header",ce,[l(le),l(ee)]))}});const re=P(ue,[["__scopeId","data-v-017cb292"]]),ie={fade:"fade",fade_top:"fade-top",fade_slide:"fade-slide",fade_scale:"fade-scale",fade_bottom:"fade-bottom",breadcrumb:"breadcrumb"},_e={class:"relative flex-1 overflow-x-hidden overflow-y-auto bg-gray-50"},de=g({__name:"index",setup(n){return(t,o)=>{const u=c("RouterView");return s(),v("section",_e,[l(u,{class:"absolute w-full h-full p-4"},{default:a(({Component:r,route:p})=>[r?(s(),_(N,{key:0,mode:"out-in",name:m(ie).fade_slide},{default:a(()=>[(s(),_(U,null,[(s(),_(L(r),{key:p.fullPath}))],1024))]),_:2},1032,["name"])):T("",!0)]),_:1})])}}}),me=n=>(q("data-v-527ef2d6"),n=n(),z(),n),pe={class:"flex h-full overflow-hidden"},fe={class:"flex flex-col flex-1"},he=me(()=>x("footer",{class:"flex items-center justify-center h-8 text-gray-500 border"},"技术支持：@走我们钓鱼去",-1)),be=g({__name:"index",setup(n){const t=D();return(o,u)=>(s(),v("div",pe,[x("aside",null,[l(X,{"dynamic-routes":m(t).dynamicRoutes},null,8,["dynamic-routes"])]),x("main",fe,[l(re),l(de),he])]))}});const xe=P(be,[["__scopeId","data-v-527ef2d6"]]),we=g({__name:"index",setup(n){return(t,o)=>(s(),_(xe))}});export{we as default};
